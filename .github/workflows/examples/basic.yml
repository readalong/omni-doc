# Basic Omni-Doc Workflow
# Copy this to your repo's .github/workflows/omni-doc.yml
#
# Required setup:
# 1. Add GOOGLE_API_KEY to your repository secrets
#    (Settings → Secrets → Actions → New repository secret)

name: Documentation Analysis

on:
  pull_request:
    types: [closed]

jobs:
  omni-doc:
    if: github.event.pull_request.merged == true
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pull-requests: write

    steps:
      - name: Run Omni-Doc
        uses: readalong/omni-doc/action@v2
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          google-api-key: ${{ secrets.GOOGLE_API_KEY }}
